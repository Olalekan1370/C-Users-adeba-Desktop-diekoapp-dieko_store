<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:h="http://java.sun.com/jsf/html"
    >

    
        <div class="p-grid ui-fluid">
            <div class="p-col-12">
                <p:outputPanel id="fileupload">
<p:panelGrid styleClass="ui-panelgrid-blank" columns="1" layout="grid">
                                    
                        <p:fileUpload mode="advanced" 
                                      fileUploadListener="#{courseController.uploadCourse}"
                                          dragDropSupport="true" multiple="false" sizeLimit="4000000"
                                          fileLimit="1" allowTypes="/(\.|\/)(csv|xls|xlsx)$/"
                                          auto="true" uploadLabel=""
                                          previewWidth="50"   required="false"

                                          id="fileuploader" oncomplete="progress()"  update="fileupload">

                            </p:fileUpload>
                         <h:commandLink rendered="#{courseController.uploadvisible}">
                                   
                                   <h:outputText  
                                                 value="#{courseController.dataResponse}" 
                                                 style="font-size:16px; margin-top:-40px; color:#4CAF50"/>
                                                 <p:graphicImage library="ultima-layout"
                                                 name="icons/working.svg" 
                                                 />
                                                 </h:commandLink>
                                <p:remoteCommand name="progress" 
                                                 action="#{courseController.loadRecord}"
                                                 update="fileupload,@(#crs)" 
                                                 />
                                
                                </p:panelGrid>
                    <p:autoUpdate/>
                    </p:outputPanel>
            </div>
            <div class="p-col-12">
                <p:dataTable rendered="#{not empty courseController.errorLog}"
                             value="#{courseController.errorLog}" var="crs"  
                             paginatorPosition="bottom" rows="100"
                             
                             reflow="true" id="crs" style="margin-top:-20px;"
                             scrollable="true" scrollHeight="250">
                    <f:facet name="header">
                            <h:outputText value="Error Report"/>
                        </f:facet>
                    <p:column headerText="Course Code" width="120">
                            <h:outputText value="#{crs.coursecode}" />
                        </p:column>
                    <p:column headerText="Course Units" width="120">
                        <h:outputText value="#{crs.courseunits}" />
                        </p:column>
                    <p:column headerText="Course Title" width="200">
                        <h:outputText value="#{crs.coursetitle}" />
                        </p:column>
                    <p:column headerText="Comments" >
                        <h:outputText value="#{crs.comments}" />
                        </p:column>
                    <p:autoUpdate/>
                </p:dataTable>
            </div>
        </div>
        

</ui:composition>