<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:pu="http://primefaces.org/ultima">


    <ui:define name="head">
        <ui:define name="title">Backup Restore</ui:define>

    </ui:define>

    <ui:define name="content">
        <div class="ui-g ui-fluid dashboard" style="margin:0px; padding:0px">
            <div class="ui-lg-6 ui-md-12" style="margin:0px; padding:0px;">
                <h:form id="contentform">
                    <p:growl  id="pmsg" showDetail="true" life="2000"/>

                    <p:fieldset>
                        <f:facet name="legend">
                            <h:outputText value="Application Backup" style="color:#4CAF50; font-size:15px; font-weight:bold;"/>
                           
                        </f:facet>
                        <p:outputPanel>
                            <p:autoUpdate/>
                            <h:outputText value="#{restoreController.backupResponse}" style="color:#F57F17; font-size:15px; font-weight: bold;"/>
                        <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank">
                            
                            <p:commandButton value="Start Backup" icon="fa fa-database"
                                             style="background-color: #F57F17" id="backup" 
                                             action="#{restoreController.startBackUpOperation}">
                                <p:blockUI trigger="backup" block="contentform">
                            Backup in progress please wait...
                                <p:graphicImage library="ultima-layout"
                                                 name="icons/back.svg"
                                                 />
                            </p:blockUI>
                            </p:commandButton>
                        </p:panelGrid>
                        
                            
                           
                        </p:outputPanel>
                    </p:fieldset>
                </h:form>
                
               
            </div>
            <div class="ui-g-6">
                <h:form id="contentform2">
                    <p:growl  id="pmsg" showDetail="true" life="2000">
                        <p:autoUpdate/>
                    </p:growl>

                    <p:fieldset>
                        <f:facet name="legend">
                            <h:outputText value="Application Restore" style="color:#4CAF50; font-size:15px; font-weight:bold;"/>
                            
                        </f:facet>
                         <h:outputText value="Select file to restore from your computer" style="color:#4CAF50; font-size:15px; font-weight:bold;"/>
                            <p:outputPanel id="fileupload" styleClass="ui-fluid" style="margin-top:-10px; padding:0px;"
                                           > 
                                   <p:autoUpdate/>
                                <p:panelGrid styleClass="ui-panelgrid-blank" columns="1" layout="grid">
                                    
                        <p:fileUpload mode="advanced" 
                                          fileUploadListener="#{restoreController.restoreData}"
                                          dragDropSupport="true" multiple="false" sizeLimit="4000000"
                                          fileLimit="1" allowTypes="/(\.|\/)(ZIP|zip)$/"
                                          auto="true" uploadLabel=""
                                          previewWidth="50"   required="false"

                                          id="fileuploader" oncomplete="progress()"  update="fileupload">

                            </p:fileUpload>
                         <h:commandLink>
                                   
                                   <h:outputText  
                                                 value="#{restoreController.dataResponse}" 
                                                 style="font-size:16px; margin-top:-40px; color:#4CAF50"/>
                                                 <p:graphicImage library="ultima-layout"
                                                 name="icons/working.svg" rendered="#{restoreController.uploadvisible}"
                                                 />
                                                 </h:commandLink>
                                <p:remoteCommand name="progress" 
                                                 action="#{restoreController.restoreFile}"
                                                 update="fileupload"
                                                 />
                                
                                </p:panelGrid>
                            </p:outputPanel>
                    </p:fieldset>
                     
                </h:form>
            </div>
            

        </div>


    </ui:define>

</ui:composition>