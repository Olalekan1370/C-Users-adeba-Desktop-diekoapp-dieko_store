
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pu="http://primefaces.org/ultima">

    <h:form id="menuform_1"> 
        <div class="layout-menu #{guestPreferences.menuClass}">
            <div class="nano">
                <div class="nano-content menu-scroll-content">
                    <ui:fragment rendered="#{guestPreferences.profileMode == 'inline' and guestPreferences.menuLayout != 'menu-layout-static menu-layout-horizontal'}">
                        <div class="profile">
                            <div class="profile-imag">
                                <p:graphicImage name="images/odofin.jpg" style="width:100px; height:80px; border-radius:10px;"
                                                library="ultima-layout"/>
                            </div>
                            <a id="profile-options" href="#">
                                <span class="profile-name">Welcome, #{admin.fullname}</span>
                                <i class="material-icons">&#xE313;</i>
                            </a>
                        </div>

                        <ul id="profile-menu" class="ultima-menu">
                            <li role="menuitem">
                                <a href="#" class="ripplelink" onclick="PF('passwordDialog').show()">
                                    <i class="material-icons">&#xE7FD;</i>
                                    <span>Change Password</span>
                                </a>
                            </li>
                            <li role="menuitem">
                                <a href="#" class="ripplelink">
                                    <i class="material-icons">&#xE32A;</i>
                                    <span>Privacy</span>
                                </a>
                            </li>
                            <li role="menuitem">
                                <a href="#" class="ripplelink" onclick="PF('app_setting').show();">
                                    <i class="material-icons">&#xE8B9;</i>
                                    <span>Settings</span>
                                </a>
                            </li>
                            <li role="menuitem">
                               
                                <p:commandLink styleClass="ripplelink" action="#{loginController.logoutAdmin}">
                                      <i class="material-icons" >&#xE8AC;</i>
                                    <span>Logout</span>
                                </p:commandLink>
                                
                            </li>
                        </ul>
                    </ui:fragment>
                    <pu:menu widgetVar="me" style="background-color:white;">
                        <p:menuitem value="Exam Reviews" url="result_reviews.xhtml" icon="fa fa-tasks"/>
                       <p:menuitem  value="Question Mapping" icon="fa fa-upload" url="mapping.xhtml"/>
                        <p:menuitem id="um_dashboard" value="Dashboard" icon="&#xE871;" url="reports.xhtml"/>
                        <p:menuitem id="um_utils" value="Course" icon="fa fa-address-card-o"
                                    url="course.xhtml"/>
                        <p:menuitem  value="Course Reg" icon="fa fa-address-card-o" url="course_reg.xhtml"/>
                        <p:menuitem  value="Exam Session" icon="fa fa-clone" url="exam_session.xhtml"/>
                        <p:menuitem  value="Passages" icon="fa fa-clone" url="passage.xhtml"/>
                        <p:menuitem  value="Question" icon="fa fa-book" url="question.xhtml"/>
                        <p:menuitem  value="Student" icon="fa fa-users" url="students.xhtml"/>
                        <p:menuitem  value="Lecturer" icon="fa fa-user-circle" url="lecturer.xhtml"/>
                        <p:menuitem  value="Upload Manager" icon="fa fa-upload" url="file_logs.xhtml"/>
                        <p:menuitem  value="Backup Restore" icon="fa fa-cogs" url="backup_restore.xhtml"/>
                         </pu:menu>
                </div>
            </div>
        </div>
        <p:dialog  
        widgetVar="app_setting"
        responsive="true" 
        closeOnEscape="true"
        dynamic="true"
        position="center" 
        closable="true"
        id="app_setting"
        fitViewport="true"
        width="400"
        >
        <f:facet name="header">
            Application Settings
        </f:facet>
        
        <div class="p-grid ui-fluid">
            <div class="p-col-12">
                <p:outputPanel id="newp">
                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank"
                             >
                    <h:panelGroup styleClass="md-inputfield md-inputfield-fill" >
                        <p:inputText value=
                                     "#{settingController.settings.attemptBeforeSubmission}" />
                        
                            <label>Attempt Before Submission</label>
                        </h:panelGroup> 
                        <p:outputLabel value="Did you want to allow custom question to be separate?"/>
                    <p:selectBooleanCheckbox 
                        value="#{settingController.settings.custom_question_combine}"
                                             />
                    <p:outputLabel value="Open passage in dialog?"/>
                    <p:selectBooleanCheckbox 
                        value="#{settingController.settings.passage_on_dialog}"
                                             />
                    <p:outputLabel value="Allow Email Sender"/>
                    <p:selectBooleanCheckbox 
                                             value="#{settingController.settings.emailactive}"
                                             />
                    <p:outputLabel value="Allow Immediate Score Receiving?"/>
                    <p:selectBooleanCheckbox  
                                             value="#{settingController.settings.scoreImmediate}"/>
                    <p:outputLabel value="Allow Lecturer  receive result after making?"/>
                    <p:selectBooleanCheckbox  
                                             value="#{settingController.settings.resultDownloadOpen}"/>
                    <p:outputLabel value="Allow multiple course selection for single exam?"/>
                    <p:selectBooleanCheckbox  
                                             value="#{settingController.settings.multipleCourseSelection}"/>
                   <h:panelGroup styleClass="md-inputfield md-inputfield-fill" >
                        <p:inputText value=
                                     "#{settingController.settings.backup_location}" />
                        
                            <label>Backup Location</label>
                        </h:panelGroup>
                    <f:facet name="footer">
                        <p:commandButton value="Update Setting"  icon="fa fa-refresh" 
                                         action="#{settingController.updateSetting}"
                             styleClass="success-btn raised-btn" />
                    </f:facet>
               
                </p:panelGrid> 
                    <p:autoUpdate/>
                </p:outputPanel>
            </div>
        </div>
       
            
            
      
    </p:dialog> 
        <p:dialog  
        widgetVar="passwordDialog"
        responsive="true" 
        closeOnEscape="true"
        dynamic="true"
        position="center" 
        closable="true"
        id="passwordDialog"
        fitViewport="true"
        width="400"
        >
        <f:facet name="header">
           Password Management
        </f:facet>
        
        <div class="p-grid ui-fluid">
            <div class="p-col-12">
                <p:outputPanel id="password_panel">
                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank"
                             >
                    <h:panelGroup styleClass="md-inputfield md-inputfield-fill" >
                        <p:password value=
                                    "#{appHelper.oldpass}" />
                        
                            <label>Old Password</label>
                        </h:panelGroup>
                    
                    <h:panelGroup styleClass="md-inputfield md-inputfield-fill" >
                        <p:password value=
                                    "#{appHelper.newpass}" />
                        
                            <label>New Password</label>
                        </h:panelGroup>
                    <h:panelGroup styleClass="md-inputfield md-inputfield-fill" >
                        <p:password value=
                                    "#{appHelper.confirmPassword}" />
                        
                            <label>Confirm Password</label>
                        </h:panelGroup>
               
                </p:panelGrid> 
                    <p:autoUpdate/>
                </p:outputPanel>
            </div>
        </div>
       
            
                    <f:facet name="footer">
                        <p:commandButton value="Change Password"  icon="fa fa-refresh" 
                                         
                                         styleClass="success-btn raised-btn"  action="#{loginController.changeUserPassword}"/>
                    </f:facet>
            
      
    </p:dialog> 
    </h:form>
</ui:composition>